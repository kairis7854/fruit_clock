(this["webpackJsonpday994-fruit-clock"]=this["webpackJsonpday994-fruit-clock"]||[]).push([[0],{26:function(t,e,s){},29:function(t,e,s){},30:function(t,e,s){},31:function(t,e,s){},32:function(t,e,s){},33:function(t,e,s){},34:function(t,e,s){},35:function(t,e,s){"use strict";s.r(e);var i=s(1),n=s.n(i),c=s(5),a=s.n(c),o=s(3),l=s(7),r="test",u="tomato",m="watermelon",j="strawberry",d="cantaloupe",b="nowMission";var O="TOMATO";var f={id:"",missoin:"",time:"",smoke:""};var _=Object(l.a)({test:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,s=e.type;switch(e.data,s){case r:return++t;default:return t}},fruit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0,s=e.type;switch(e.data,s){case u:return"TOMATO";case j:return"STRAWBERRY";case m:return"WATERMELON";case d:return"CANTALOUPE";default:return t}},mission:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0,s=e.type,i=e.data;switch(s){case b:return i;default:return t}}}),p=Object(l.b)(_),v=s(2),x=(s(26),s(0)),h=function(){var t=Object(o.b)();return Object(x.jsxs)("div",{className:"fruitButton",children:[Object(x.jsx)("button",{className:"fruitButton__tomatoButton",onClick:function(){t({type:u})},children:Object(x.jsx)("div",{className:"fruitButton__tomatoIMG"})}),Object(x.jsx)("button",{className:"fruitButton__strawberryButton",onClick:function(){t({type:j})},children:Object(x.jsx)("div",{className:"fruitButton__strawberryIMG"})}),Object(x.jsx)("button",{className:"fruitButton__watermelonButton",onClick:function(){t({type:m})},children:Object(x.jsx)("div",{className:"fruitButton__watermelonIMG"})}),Object(x.jsx)("button",{className:"fruitButton__cantaloupeButton",onClick:function(){t({type:d})},children:Object(x.jsx)("div",{className:"fruitButton__cantaloupeIMG"})})]})},k=n.a.memo(h),y=s(4),N=s.p+"static/media/play-button.bb43f381.svg",g=s.p+"static/media/pause-button.a5abb526.svg",R=s.p+"static/media/blackout_harp1.c533454e.mp3",A=s.p+"static/media/blackout_harp2.b001a8e8.mp3",I=s.p+"static/media/tomato.7f1b1aa7.png",w=s.p+"static/media/strawberry.2289a785.png",L=s.p+"static/media/watermelon.1bee71d4.png",B=s.p+"static/media/cantaloupe.4727635b.png",M=(s(12),s(13),s(14)),T=s(17),C=s(16);function E(){G.mission.bulkAdd([{id:1,mission:"\u6253\u75ab\u82d7",time:3,smoke:!1},{id:2,mission:"\u5403\u98ef",time:6,smoke:!1},{id:3,mission:"\u7761\u89ba",time:3,smoke:!1},{id:4,mission:"\u6253\u4ee3\u78bc",time:3,smoke:!1}])}var G=new(function(t){Object(T.a)(s,t);var e=Object(C.a)(s);function s(){var t;return Object(M.a)(this,s),(t=e.call(this,"FruitClockDB")).version(.1).stores({mission:"id,mission,time,smoke"}),t}return s}(s(10).default));G.on("populate",E);s(29);function S(t){var e=t%60,s=parseInt(t/60),i=e<10?0:"";return["".concat(s<10?0:"").concat(s,":").concat(i).concat(e)]}var W=new Audio(R),D=new Audio(A),F=function(t){var e=Object(o.c)((function(t){return t.mission})),s=Object(o.c)((function(t){return t.fruit})),n=Object(i.useState)(Number),c=Object(v.a)(n,2),a=c[0],l=c[1],r=Object(i.useState)(!1),u=Object(v.a)(r,2),m=u[0],j=u[1],d=Object(i.useState)({id:"",mission:"",time:"",smoke:""}),b=Object(v.a)(d,2),O=b[0],f=b[1],_=Object(x.jsx)("img",{className:"clock__fruitIMG",src:I,style:{display:"TOMATO"===s?"block":"none"},alt:"fruit"}),p=Object(x.jsx)("img",{className:"clock__fruitIMG",src:w,style:{display:"STRAWBERRY"===s?"block":"none"},alt:"fruit"}),h=Object(x.jsx)("img",{className:"clock__fruitIMG",src:L,style:{display:"WATERMELON"===s?"block":"none"},alt:"fruit"}),k=Object(x.jsx)("img",{className:"clock__fruitIMG",src:B,style:{display:"CANTALOUPE"===s?"block":"none"},alt:"fruit"}),R=Object(x.jsx)("img",{className:"clock__switch",src:g,onClick:function(){M()},style:{display:t.isRun?"block":"none"},alt:"icon_pause"}),A=Object(x.jsx)("img",{className:"clock__switch",src:N,onClick:function(){T()},style:{display:t.isRun?"none":"block"},alt:"icon_pause"});Object(i.useEffect)((function(){G.mission.toArray().then((function(t){f({id:t[0]?t[0].id:0,mission:t[0]?t[0].mission:"\u4efb\u52d9",time:t[0]?t[0].time:0,smoke:!!t[0]&&t[0].smoke})}))}),[]),Object(i.useEffect)((function(){f(e)}),[e]),Object(i.useEffect)((function(){var e;return t.isRun?e=setInterval((function(){l((function(t){return t-1}))}),1e3):clearInterval(e),function(){return clearInterval(e)}}),[t.isRun]),Object(i.useEffect)((function(){if(!m&&t.isRun&&0===a)return l(3),j(!0),void W.play();m&&0===a&&(t.setIsRun(!t.isRun),j(!1),D.play(),G.mission.delete(O.id),f({mission:"\u5b8c\u6210",time:0}))}),[a]);var M=function(){t.setIsRun(!t.isRun),f(Object(y.a)(Object(y.a)({},O),{},{time:a,smoke:!!m})),G.mission.put({id:O.id,mission:O.mission,time:a,smoke:!!m}),j(!1)},T=function(){0!==O.id?"\u5b8c\u6210"!==O.mission?(!0===O.smoke&&j(!0),t.setIsRun(!t.isRun),l(O.time)):alert("\u4efb\u52d9\u5df2\u5b8c\u6210!\u8acb\u9078\u64c7\u65b0\u7684\u4efb\u52d9\u3002"):alert("\u8acb\u5275\u5efa\u65b0\u7684\u4efb\u52d9\u3002")};return Object(x.jsxs)("div",{className:"clock",children:[Object(x.jsxs)("div",{className:"clock__mission",children:[m?"\u4f11\u606f":O.mission,m?null:O.smoke&&"(\u4f11\u606f)",R,A]}),Object(x.jsxs)("div",{children:[_,p,h,k]}),Object(x.jsx)("div",{children:Object(x.jsx)("p",{className:"clock__time",children:t.isRun?S(a):S(O.time)})})]})},J=s.p+"static/media/shopping-list.aadce41e.svg",P=s.p+"static/media/plus.b03e3495.svg",U=s(15),Y=(s(30),function(t){var e=Object(U.useLiveQuery)((function(){return G.mission.toArray()})),s=Object(o.b)();return Object(x.jsxs)("div",{className:"list",children:[Object(x.jsx)("div",{className:"list__iconList",children:Object(x.jsx)("img",{src:J,className:"list__iconList__IMG",alt:"logo"})}),Object(x.jsx)("ul",{className:"list__ul",children:e?e.map((function(e){return Object(x.jsx)("li",{className:"list__ul__li",onClick:function(){!function(e){t.isRun||s({type:b,data:e})}(e)},children:e.mission},e.id)})):null}),Object(x.jsx)("div",{className:"list__iconAdd",onClick:function(){t.setListType(!0)},children:Object(x.jsx)("img",{src:P,className:"list__iconAdd__IMG",alt:"logo"})})]})});function Q(t,e){return t.isRun===e.isRun}var $=n.a.memo(Y,Q),q=s(6),z=(s(31),/^\d*?$/),H=function(t){var e=new Date,s=Object(i.useState)({mission:"",time:""}),n=Object(v.a)(s,2),c=n[0],a=n[1],o=function(t){"time"!==t.target.name||z.test(t.target.value)?a(Object(y.a)(Object(y.a)({},c),{},Object(q.a)({},t.target.name,t.target.value))):alert("\u8acb\u8f38\u5165\u6578\u5b57")};return Object(x.jsxs)("div",{className:"ListAdd",children:[Object(x.jsx)("div",{className:"ListAdd__iconAdd",children:Object(x.jsx)("img",{src:P,className:"ListAdd__iconAdd__IMG",alt:"logo"})}),Object(x.jsxs)("form",{className:"ListAdd__form",onSubmit:function(t){t.preventDefault(),c.mission&&c.time?c.time>9999?alert("\u6642\u9593\u4e0d\u80fd\u8d85\u904e9999\u5206\u9418!"):(G.mission.add({id:e.getTime(),mission:c.mission,time:2*c.time,smoke:!1}),a({mission:"",time:""}),alert("\u6dfb\u52a0\u4efb\u52d9\u6210\u529f!")):alert("\u4efb\u52d9\u540d\u7a31\u6216\u6642\u9593\u4e0d\u80fd\u70ba\u7a7a!")},children:[Object(x.jsxs)("label",{children:["\u4efb\u52d9\uff1a",Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"mission",type:"text",value:c.mission,onChange:o})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:["\u6642\u9593(\u5206)\uff1a",Object(x.jsx)("input",{name:"time",type:"text",value:c.time,onChange:o.bind(undefined)})]}),Object(x.jsx)("button",{children:"\u78ba\u5b9a"})]}),Object(x.jsx)("div",{className:"ListAdd__iconList",onClick:function(){t.setListType(!1)},children:Object(x.jsx)("img",{src:J,className:"ListAdd__iconList__IMG",alt:"logo"})})]})};s(32);function K(t){var e=t.isRun,s=Object(i.useState)(!1),n=Object(v.a)(s,2),c=n[0],a=n[1];return Object(x.jsxs)("div",{className:"list",children:[Object(x.jsx)("div",{style:{display:c?"none":"block"},children:Object(x.jsx)($,{isRun:e,setListType:a})}),Object(x.jsx)("div",{style:{display:c?"block":"none"},children:Object(x.jsx)(H,{setListType:a})})]})}s(33);var V=function(){var t=Object(i.useState)(!1),e=Object(v.a)(t,2),s=e[0],n=e[1];return Object(x.jsxs)("div",{className:"home",children:[Object(x.jsx)("div",{className:"home__FuitButton",children:Object(x.jsx)(k,{})}),Object(x.jsx)("div",{className:"home__Clock",children:Object(x.jsx)(F,{isRun:s,setIsRun:n})}),Object(x.jsx)("div",{className:"home__List",children:Object(x.jsx)(K,{isRun:s})})]})},X=(s(34),function(){return Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(V,{})})});a.a.render(Object(x.jsx)(o.a,{store:p,children:Object(x.jsx)(X,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.7213bbfa.chunk.js.map